{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.every.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport { defineComponent, inject, ref, computed, watch, provide, getCurrentInstance, resolveComponent, openBlock, createElementBlock, normalizeClass, Fragment, renderList, createBlock, renderSlot, createElementVNode, toDisplayString, createCommentVNode, withDirectives, vShow } from 'vue';\nimport { selectKey } from '../../select/src/token.mjs';\nimport TreeStore from './model/tree-store.mjs';\nimport { getNodeKey, handleCurrentChange } from './model/util.mjs';\nimport ElTreeNode from './tree-node.mjs';\nimport { useNodeExpandEventBroadcast } from './model/useNodeExpandEventBroadcast.mjs';\nimport { useDragNodeHandler } from './model/useDragNode.mjs';\nimport { useKeydown } from './model/useKeydown.mjs';\nimport { ROOT_TREE_INJECTION_KEY } from './tokens.mjs';\nimport { isEqual } from 'lodash-unified';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport { definePropType } from '../../../utils/vue/props/runtime.mjs';\nimport { iconPropType } from '../../../utils/vue/icon.mjs';\nimport { useLocale } from '../../../hooks/use-locale/index.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\nimport { formItemContextKey } from '../../form/src/constants.mjs';\nconst _sfc_main = defineComponent({\n  name: \"ElTree\",\n  components: {\n    ElTreeNode\n  },\n  props: {\n    data: {\n      type: definePropType(Array),\n      default: () => []\n    },\n    emptyText: {\n      type: String\n    },\n    renderAfterExpand: {\n      type: Boolean,\n      default: true\n    },\n    nodeKey: String,\n    checkStrictly: Boolean,\n    defaultExpandAll: Boolean,\n    expandOnClickNode: {\n      type: Boolean,\n      default: true\n    },\n    checkOnClickNode: Boolean,\n    checkOnClickLeaf: {\n      type: Boolean,\n      default: true\n    },\n    checkDescendants: Boolean,\n    autoExpandParent: {\n      type: Boolean,\n      default: true\n    },\n    defaultCheckedKeys: Array,\n    defaultExpandedKeys: Array,\n    currentNodeKey: [String, Number],\n    renderContent: {\n      type: definePropType(Function)\n    },\n    showCheckbox: Boolean,\n    draggable: Boolean,\n    allowDrag: {\n      type: definePropType(Function)\n    },\n    allowDrop: {\n      type: definePropType(Function)\n    },\n    props: {\n      type: Object,\n      default: () => ({\n        children: \"children\",\n        label: \"label\",\n        disabled: \"disabled\"\n      })\n    },\n    lazy: Boolean,\n    highlightCurrent: Boolean,\n    load: Function,\n    filterNodeMethod: Function,\n    accordion: Boolean,\n    indent: {\n      type: Number,\n      default: 18\n    },\n    icon: {\n      type: iconPropType\n    }\n  },\n  emits: [\"check-change\", \"current-change\", \"node-click\", \"node-contextmenu\", \"node-collapse\", \"node-expand\", \"check\", \"node-drag-start\", \"node-drag-end\", \"node-drop\", \"node-drag-leave\", \"node-drag-enter\", \"node-drag-over\"],\n  setup(props, ctx) {\n    const {\n      t\n    } = useLocale();\n    const ns = useNamespace(\"tree\");\n    const selectInfo = inject(selectKey, null);\n    const store = ref(new TreeStore({\n      key: props.nodeKey,\n      data: props.data,\n      lazy: props.lazy,\n      props: props.props,\n      load: props.load,\n      currentNodeKey: props.currentNodeKey,\n      checkStrictly: props.checkStrictly,\n      checkDescendants: props.checkDescendants,\n      defaultCheckedKeys: props.defaultCheckedKeys,\n      defaultExpandedKeys: props.defaultExpandedKeys,\n      autoExpandParent: props.autoExpandParent,\n      defaultExpandAll: props.defaultExpandAll,\n      filterNodeMethod: props.filterNodeMethod\n    }));\n    store.value.initialize();\n    const root = ref(store.value.root);\n    const currentNode = ref(null);\n    const el$ = ref(null);\n    const dropIndicator$ = ref(null);\n    const {\n      broadcastExpanded\n    } = useNodeExpandEventBroadcast(props);\n    const {\n      dragState\n    } = useDragNodeHandler({\n      props,\n      ctx,\n      el$,\n      dropIndicator$,\n      store\n    });\n    useKeydown({\n      el$\n    }, store);\n    const isEmpty = computed(() => {\n      const {\n        childNodes\n      } = root.value;\n      const hasFilteredOptions = selectInfo ? selectInfo.hasFilteredOptions !== 0 : false;\n      return (!childNodes || childNodes.length === 0 || childNodes.every(({\n        visible\n      }) => !visible)) && !hasFilteredOptions;\n    });\n    watch(() => props.currentNodeKey, newVal => {\n      store.value.setCurrentNodeKey(newVal != null ? newVal : null);\n    });\n    watch(() => props.defaultCheckedKeys, (newVal, oldVal) => {\n      if (isEqual(newVal, oldVal)) return;\n      store.value.setDefaultCheckedKey(newVal != null ? newVal : []);\n    });\n    watch(() => props.defaultExpandedKeys, newVal => {\n      store.value.setDefaultExpandedKeys(newVal != null ? newVal : []);\n    });\n    watch(() => props.data, newVal => {\n      store.value.setData(newVal);\n    }, {\n      deep: true\n    });\n    watch(() => props.checkStrictly, newVal => {\n      store.value.checkStrictly = newVal;\n    });\n    const filter = value => {\n      if (!props.filterNodeMethod) throw new Error(\"[Tree] filterNodeMethod is required when filter\");\n      store.value.filter(value);\n    };\n    const getNodeKey$1 = node => {\n      return getNodeKey(props.nodeKey, node.data);\n    };\n    const getNodePath = data => {\n      if (!props.nodeKey) throw new Error(\"[Tree] nodeKey is required in getNodePath\");\n      const node = store.value.getNode(data);\n      if (!node) return [];\n      const path = [node.data];\n      let parent = node.parent;\n      while (parent && parent !== root.value) {\n        path.push(parent.data);\n        parent = parent.parent;\n      }\n      return path.reverse();\n    };\n    const getCheckedNodes = (leafOnly, includeHalfChecked) => {\n      return store.value.getCheckedNodes(leafOnly, includeHalfChecked);\n    };\n    const getCheckedKeys = leafOnly => {\n      return store.value.getCheckedKeys(leafOnly);\n    };\n    const getCurrentNode = () => {\n      const currentNode2 = store.value.getCurrentNode();\n      return currentNode2 ? currentNode2.data : null;\n    };\n    const getCurrentKey = () => {\n      if (!props.nodeKey) throw new Error(\"[Tree] nodeKey is required in getCurrentKey\");\n      const currentNode2 = getCurrentNode();\n      return currentNode2 ? currentNode2[props.nodeKey] : null;\n    };\n    const setCheckedNodes = (nodes, leafOnly) => {\n      if (!props.nodeKey) throw new Error(\"[Tree] nodeKey is required in setCheckedNodes\");\n      store.value.setCheckedNodes(nodes, leafOnly);\n    };\n    const setCheckedKeys = (keys, leafOnly) => {\n      if (!props.nodeKey) throw new Error(\"[Tree] nodeKey is required in setCheckedKeys\");\n      store.value.setCheckedKeys(keys, leafOnly);\n    };\n    const setChecked = (data, checked, deep) => {\n      store.value.setChecked(data, checked, deep);\n    };\n    const getHalfCheckedNodes = () => {\n      return store.value.getHalfCheckedNodes();\n    };\n    const getHalfCheckedKeys = () => {\n      return store.value.getHalfCheckedKeys();\n    };\n    const setCurrentNode = (node, shouldAutoExpandParent = true) => {\n      if (!props.nodeKey) throw new Error(\"[Tree] nodeKey is required in setCurrentNode\");\n      handleCurrentChange(store, ctx.emit, () => {\n        broadcastExpanded(node);\n        store.value.setUserCurrentNode(node, shouldAutoExpandParent);\n      });\n    };\n    const setCurrentKey = (key, shouldAutoExpandParent = true) => {\n      if (!props.nodeKey) throw new Error(\"[Tree] nodeKey is required in setCurrentKey\");\n      handleCurrentChange(store, ctx.emit, () => {\n        broadcastExpanded();\n        store.value.setCurrentNodeKey(key != null ? key : null, shouldAutoExpandParent);\n      });\n    };\n    const getNode = data => {\n      return store.value.getNode(data);\n    };\n    const remove = data => {\n      store.value.remove(data);\n    };\n    const append = (data, parentNode) => {\n      store.value.append(data, parentNode);\n    };\n    const insertBefore = (data, refNode) => {\n      store.value.insertBefore(data, refNode);\n    };\n    const insertAfter = (data, refNode) => {\n      store.value.insertAfter(data, refNode);\n    };\n    const handleNodeExpand = (nodeData, node, instance) => {\n      broadcastExpanded(node);\n      ctx.emit(\"node-expand\", nodeData, node, instance);\n    };\n    const updateKeyChildren = (key, data) => {\n      if (!props.nodeKey) throw new Error(\"[Tree] nodeKey is required in updateKeyChild\");\n      store.value.updateChildren(key, data);\n    };\n    provide(ROOT_TREE_INJECTION_KEY, {\n      ctx,\n      props,\n      store,\n      root,\n      currentNode,\n      instance: getCurrentInstance()\n    });\n    provide(formItemContextKey, void 0);\n    return {\n      ns,\n      store,\n      root,\n      currentNode,\n      dragState,\n      el$,\n      dropIndicator$,\n      isEmpty,\n      filter,\n      getNodeKey: getNodeKey$1,\n      getNodePath,\n      getCheckedNodes,\n      getCheckedKeys,\n      getCurrentNode,\n      getCurrentKey,\n      setCheckedNodes,\n      setCheckedKeys,\n      setChecked,\n      getHalfCheckedNodes,\n      getHalfCheckedKeys,\n      setCurrentNode,\n      setCurrentKey,\n      t,\n      getNode,\n      remove,\n      append,\n      insertBefore,\n      insertAfter,\n      handleNodeExpand,\n      updateKeyChildren\n    };\n  }\n});\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_tree_node = resolveComponent(\"el-tree-node\");\n  return openBlock(), createElementBlock(\"div\", {\n    ref: \"el$\",\n    class: normalizeClass([_ctx.ns.b(), _ctx.ns.is(\"dragging\", !!_ctx.dragState.draggingNode), _ctx.ns.is(\"drop-not-allow\", !_ctx.dragState.allowDrop), _ctx.ns.is(\"drop-inner\", _ctx.dragState.dropType === \"inner\"), {\n      [_ctx.ns.m(\"highlight-current\")]: _ctx.highlightCurrent\n    }]),\n    role: \"tree\"\n  }, [(openBlock(true), createElementBlock(Fragment, null, renderList(_ctx.root.childNodes, child => {\n    return openBlock(), createBlock(_component_el_tree_node, {\n      key: _ctx.getNodeKey(child),\n      node: child,\n      props: _ctx.props,\n      accordion: _ctx.accordion,\n      \"render-after-expand\": _ctx.renderAfterExpand,\n      \"show-checkbox\": _ctx.showCheckbox,\n      \"render-content\": _ctx.renderContent,\n      onNodeExpand: _ctx.handleNodeExpand\n    }, null, 8, [\"node\", \"props\", \"accordion\", \"render-after-expand\", \"show-checkbox\", \"render-content\", \"onNodeExpand\"]);\n  }), 128)), _ctx.isEmpty ? (openBlock(), createElementBlock(\"div\", {\n    key: 0,\n    class: normalizeClass(_ctx.ns.e(\"empty-block\"))\n  }, [renderSlot(_ctx.$slots, \"empty\", {}, () => {\n    var _a;\n    return [createElementVNode(\"span\", {\n      class: normalizeClass(_ctx.ns.e(\"empty-text\"))\n    }, toDisplayString((_a = _ctx.emptyText) != null ? _a : _ctx.t(\"el.tree.emptyText\")), 3)];\n  })], 2)) : createCommentVNode(\"v-if\", true), withDirectives(createElementVNode(\"div\", {\n    ref: \"dropIndicator$\",\n    class: normalizeClass(_ctx.ns.e(\"drop-indicator\"))\n  }, null, 2), [[vShow, _ctx.dragState.showDropIndicator]])], 2);\n}\nvar Tree = /* @__PURE__ */_export_sfc(_sfc_main, [[\"render\", _sfc_render], [\"__file\", \"tree.vue\"]]);\nexport { Tree as default };","map":{"version":3,"names":["_sfc_main","defineComponent","name","components","ElTreeNode","props","data","type","definePropType","Array","default","emptyText","String","renderAfterExpand","Boolean","nodeKey","checkStrictly","defaultExpandAll","expandOnClickNode","checkOnClickNode","checkOnClickLeaf","checkDescendants","autoExpandParent","defaultCheckedKeys","defaultExpandedKeys","currentNodeKey","Number","renderContent","Function","showCheckbox","draggable","allowDrag","allowDrop","Object","children","label","disabled","lazy","highlightCurrent","load","filterNodeMethod","accordion","indent","icon","iconPropType","emits","setup","ctx","t","useLocale","ns","useNamespace","selectInfo","inject","selectKey","store","ref","TreeStore","key","value","initialize","root","currentNode","el$","dropIndicator$","broadcastExpanded","useNodeExpandEventBroadcast","dragState","useDragNodeHandler","useKeydown","isEmpty","computed","childNodes","hasFilteredOptions","length","every","visible","watch","newVal","setCurrentNodeKey","oldVal","isEqual","setDefaultCheckedKey","setDefaultExpandedKeys","setData","deep","filter","Error","getNodeKey$1","node","getNodeKey","getNodePath","getNode","path","parent","push","reverse","getCheckedNodes","leafOnly","includeHalfChecked","getCheckedKeys","getCurrentNode","currentNode2","getCurrentKey","setCheckedNodes","nodes","setCheckedKeys","keys","setChecked","checked","getHalfCheckedNodes","getHalfCheckedKeys","setCurrentNode","shouldAutoExpandParent","handleCurrentChange","emit","setUserCurrentNode","setCurrentKey","remove","append","parentNode","insertBefore","refNode","insertAfter","handleNodeExpand","nodeData","instance","updateKeyChildren","updateChildren","provide","ROOT_TREE_INJECTION_KEY","getCurrentInstance","formItemContextKey","_sfc_render","_ctx","_cache","$props","$setup","$data","$options","_component_el_tree_node","resolveComponent","openBlock","createElementBlock","class","normalizeClass","b","is","draggingNode","dropType","m","role","Fragment","renderList","child","createBlock","onNodeExpand","e","renderSlot","$slots","_a","createElementVNode","createCommentVNode","withDirectives","vShow","showDropIndicator","Tree","_export_sfc"],"sources":["../../../../../../packages/components/tree/src/tree.vue"],"sourcesContent":["<template>\n  <div\n    ref=\"el$\"\n    :class=\"[\n      ns.b(),\n      ns.is('dragging', !!dragState.draggingNode),\n      ns.is('drop-not-allow', !dragState.allowDrop),\n      ns.is('drop-inner', dragState.dropType === 'inner'),\n      { [ns.m('highlight-current')]: highlightCurrent },\n    ]\"\n    role=\"tree\"\n  >\n    <el-tree-node\n      v-for=\"child in root.childNodes\"\n      :key=\"getNodeKey(child)\"\n      :node=\"child\"\n      :props=\"props\"\n      :accordion=\"accordion\"\n      :render-after-expand=\"renderAfterExpand\"\n      :show-checkbox=\"showCheckbox\"\n      :render-content=\"renderContent\"\n      @node-expand=\"handleNodeExpand\"\n    />\n    <div v-if=\"isEmpty\" :class=\"ns.e('empty-block')\">\n      <slot name=\"empty\">\n        <span :class=\"ns.e('empty-text')\">\n          {{ emptyText ?? t('el.tree.emptyText') }}\n        </span>\n      </slot>\n    </div>\n    <div\n      v-show=\"dragState.showDropIndicator\"\n      ref=\"dropIndicator$\"\n      :class=\"ns.e('drop-indicator')\"\n    />\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport {\n  computed,\n  defineComponent,\n  getCurrentInstance,\n  inject,\n  provide,\n  ref,\n  watch,\n} from 'vue'\nimport { definePropType, iconPropType } from '@element-plus/utils'\nimport { useLocale, useNamespace } from '@element-plus/hooks'\nimport { formItemContextKey } from '@element-plus/components/form'\nimport { selectKey } from '@element-plus/components/select/src/token'\nimport TreeStore from './model/tree-store'\nimport { getNodeKey as getNodeKeyUtil, handleCurrentChange } from './model/util'\nimport ElTreeNode from './tree-node.vue'\nimport { useNodeExpandEventBroadcast } from './model/useNodeExpandEventBroadcast'\nimport { useDragNodeHandler } from './model/useDragNode'\nimport { useKeydown } from './model/useKeydown'\nimport { ROOT_TREE_INJECTION_KEY } from './tokens'\nimport { isEqual } from 'lodash-unified'\n\nimport type Node from './model/node'\nimport type { ComponentInternalInstance, PropType } from 'vue'\nimport type { Nullable } from '@element-plus/utils'\nimport type {\n  AllowDragFunction,\n  AllowDropFunction,\n  FilterValue,\n  RenderContentFunction,\n  TreeComponentProps,\n  TreeData,\n  TreeKey,\n  TreeNodeData,\n} from './tree.type'\n\nexport default defineComponent({\n  name: 'ElTree',\n  components: { ElTreeNode },\n  props: {\n    data: {\n      type: definePropType<TreeData>(Array),\n      default: () => [],\n    },\n    emptyText: {\n      type: String,\n    },\n    renderAfterExpand: {\n      type: Boolean,\n      default: true,\n    },\n    nodeKey: String,\n    checkStrictly: Boolean,\n    defaultExpandAll: Boolean,\n    expandOnClickNode: {\n      type: Boolean,\n      default: true,\n    },\n    checkOnClickNode: Boolean,\n    checkOnClickLeaf: {\n      type: Boolean,\n      default: true,\n    },\n    checkDescendants: Boolean,\n    autoExpandParent: {\n      type: Boolean,\n      default: true,\n    },\n    defaultCheckedKeys: Array as PropType<\n      TreeComponentProps['defaultCheckedKeys']\n    >,\n    defaultExpandedKeys: Array as PropType<\n      TreeComponentProps['defaultExpandedKeys']\n    >,\n    currentNodeKey: [String, Number] as PropType<string | number>,\n    renderContent: {\n      type: definePropType<RenderContentFunction>(Function),\n    },\n    showCheckbox: Boolean,\n    draggable: Boolean,\n    allowDrag: {\n      type: definePropType<AllowDragFunction>(Function),\n    },\n    allowDrop: {\n      type: definePropType<AllowDropFunction>(Function),\n    },\n    props: {\n      type: Object as PropType<TreeComponentProps['props']>,\n      default: () => ({\n        children: 'children',\n        label: 'label',\n        disabled: 'disabled',\n      }),\n    },\n    lazy: Boolean,\n    highlightCurrent: Boolean,\n    load: Function as PropType<TreeComponentProps['load']>,\n    filterNodeMethod: Function as PropType<\n      TreeComponentProps['filterNodeMethod']\n    >,\n    accordion: Boolean,\n    indent: {\n      type: Number,\n      default: 18,\n    },\n    icon: {\n      type: iconPropType,\n    },\n  },\n  emits: [\n    'check-change',\n    'current-change',\n    'node-click',\n    'node-contextmenu',\n    'node-collapse',\n    'node-expand',\n    'check',\n    'node-drag-start',\n    'node-drag-end',\n    'node-drop',\n    'node-drag-leave',\n    'node-drag-enter',\n    'node-drag-over',\n  ] as string[],\n  setup(props, ctx) {\n    const { t } = useLocale()\n    const ns = useNamespace('tree')\n    const selectInfo = inject(selectKey, null)\n\n    const store = ref<TreeStore>(\n      new TreeStore({\n        key: props.nodeKey,\n        data: props.data,\n        lazy: props.lazy,\n        props: props.props,\n        load: props.load,\n        currentNodeKey: props.currentNodeKey,\n        checkStrictly: props.checkStrictly,\n        checkDescendants: props.checkDescendants,\n        defaultCheckedKeys: props.defaultCheckedKeys,\n        defaultExpandedKeys: props.defaultExpandedKeys,\n        autoExpandParent: props.autoExpandParent,\n        defaultExpandAll: props.defaultExpandAll,\n        filterNodeMethod: props.filterNodeMethod,\n      })\n    )\n\n    store.value.initialize()\n\n    const root = ref<Node>(store.value.root)\n    const currentNode = ref<Node | null>(null)\n    const el$ = ref<Nullable<HTMLElement>>(null)\n    const dropIndicator$ = ref<Nullable<HTMLElement>>(null)\n\n    const { broadcastExpanded } = useNodeExpandEventBroadcast(props)\n\n    const { dragState } = useDragNodeHandler({\n      props,\n      ctx,\n      el$,\n      dropIndicator$,\n      store,\n    })\n\n    useKeydown({ el$ }, store)\n\n    const isEmpty = computed(() => {\n      const { childNodes } = root.value\n      const hasFilteredOptions = selectInfo\n        ? (selectInfo as any).hasFilteredOptions !== 0\n        : false\n      return (\n        (!childNodes ||\n          childNodes.length === 0 ||\n          childNodes.every(({ visible }) => !visible)) &&\n        !hasFilteredOptions\n      )\n    })\n\n    watch(\n      () => props.currentNodeKey,\n      (newVal) => {\n        store.value.setCurrentNodeKey(newVal ?? null)\n      }\n    )\n\n    watch(\n      () => props.defaultCheckedKeys,\n      (newVal, oldVal) => {\n        if (isEqual(newVal, oldVal)) return\n\n        store.value.setDefaultCheckedKey(newVal ?? [])\n      }\n    )\n\n    watch(\n      () => props.defaultExpandedKeys,\n      (newVal) => {\n        store.value.setDefaultExpandedKeys(newVal ?? [])\n      }\n    )\n\n    watch(\n      () => props.data,\n      (newVal) => {\n        store.value.setData(newVal)\n      },\n      { deep: true }\n    )\n\n    watch(\n      () => props.checkStrictly,\n      (newVal) => {\n        store.value.checkStrictly = newVal\n      }\n    )\n\n    const filter = (value: FilterValue) => {\n      if (!props.filterNodeMethod)\n        throw new Error('[Tree] filterNodeMethod is required when filter')\n      store.value.filter(value)\n    }\n\n    const getNodeKey = (node: Node) => {\n      return getNodeKeyUtil(props.nodeKey, node.data)\n    }\n\n    const getNodePath = (data: TreeKey | TreeNodeData) => {\n      if (!props.nodeKey)\n        throw new Error('[Tree] nodeKey is required in getNodePath')\n      const node = store.value.getNode(data)\n      if (!node) return []\n      const path = [node.data]\n      let parent = node.parent\n      while (parent && parent !== root.value) {\n        path.push(parent.data)\n        parent = parent.parent\n      }\n      return path.reverse()\n    }\n\n    const getCheckedNodes = (\n      leafOnly?: boolean,\n      includeHalfChecked?: boolean\n    ): TreeNodeData[] => {\n      return store.value.getCheckedNodes(leafOnly, includeHalfChecked)\n    }\n\n    const getCheckedKeys = (leafOnly?: boolean): TreeKey[] => {\n      return store.value.getCheckedKeys(leafOnly)\n    }\n\n    const getCurrentNode = () => {\n      const currentNode = store.value.getCurrentNode()\n      return currentNode ? currentNode.data : null\n    }\n\n    const getCurrentKey = (): TreeKey | null => {\n      if (!props.nodeKey)\n        throw new Error('[Tree] nodeKey is required in getCurrentKey')\n      const currentNode = getCurrentNode()\n      return currentNode ? currentNode[props.nodeKey] : null\n    }\n\n    const setCheckedNodes = (nodes: Node[], leafOnly?: boolean) => {\n      if (!props.nodeKey)\n        throw new Error('[Tree] nodeKey is required in setCheckedNodes')\n      store.value.setCheckedNodes(nodes, leafOnly)\n    }\n\n    const setCheckedKeys = (keys: TreeKey[], leafOnly?: boolean) => {\n      if (!props.nodeKey)\n        throw new Error('[Tree] nodeKey is required in setCheckedKeys')\n      store.value.setCheckedKeys(keys, leafOnly)\n    }\n\n    const setChecked = (\n      data: TreeKey | TreeNodeData,\n      checked: boolean,\n      deep: boolean\n    ) => {\n      store.value.setChecked(data, checked, deep)\n    }\n\n    const getHalfCheckedNodes = (): TreeNodeData[] => {\n      return store.value.getHalfCheckedNodes()\n    }\n\n    const getHalfCheckedKeys = (): TreeKey[] => {\n      return store.value.getHalfCheckedKeys()\n    }\n\n    const setCurrentNode = (node: Node, shouldAutoExpandParent = true) => {\n      if (!props.nodeKey)\n        throw new Error('[Tree] nodeKey is required in setCurrentNode')\n\n      handleCurrentChange(store, ctx.emit, () => {\n        broadcastExpanded(node)\n        store.value.setUserCurrentNode(node, shouldAutoExpandParent)\n      })\n    }\n\n    const setCurrentKey = (key?: TreeKey, shouldAutoExpandParent = true) => {\n      if (!props.nodeKey)\n        throw new Error('[Tree] nodeKey is required in setCurrentKey')\n\n      handleCurrentChange(store, ctx.emit, () => {\n        broadcastExpanded()\n        store.value.setCurrentNodeKey(key ?? null, shouldAutoExpandParent)\n      })\n    }\n\n    const getNode = (data: TreeKey | TreeNodeData): Node => {\n      return store.value.getNode(data)\n    }\n\n    const remove = (data: TreeNodeData | Node) => {\n      store.value.remove(data)\n    }\n\n    const append = (\n      data: TreeNodeData,\n      parentNode: TreeNodeData | TreeKey | Node\n    ) => {\n      store.value.append(data, parentNode)\n    }\n\n    const insertBefore = (\n      data: TreeNodeData,\n      refNode: TreeKey | TreeNodeData | Node\n    ) => {\n      store.value.insertBefore(data, refNode)\n    }\n\n    const insertAfter = (\n      data: TreeNodeData,\n      refNode: TreeKey | TreeNodeData | Node\n    ) => {\n      store.value.insertAfter(data, refNode)\n    }\n\n    const handleNodeExpand = (\n      nodeData: TreeNodeData,\n      node: Node,\n      instance: ComponentInternalInstance\n    ) => {\n      broadcastExpanded(node)\n      ctx.emit('node-expand', nodeData, node, instance)\n    }\n\n    const updateKeyChildren = (key: TreeKey, data: TreeData) => {\n      if (!props.nodeKey)\n        throw new Error('[Tree] nodeKey is required in updateKeyChild')\n      store.value.updateChildren(key, data)\n    }\n\n    provide(ROOT_TREE_INJECTION_KEY, {\n      ctx,\n      props,\n      store,\n      root,\n      currentNode,\n      instance: getCurrentInstance(),\n    })\n\n    provide(formItemContextKey, undefined)\n\n    return {\n      ns,\n      // ref\n      store,\n      root,\n      currentNode,\n      dragState,\n      el$,\n      dropIndicator$,\n\n      // computed\n      isEmpty,\n\n      // methods\n      filter,\n      getNodeKey,\n      getNodePath,\n      getCheckedNodes,\n      getCheckedKeys,\n      getCurrentNode,\n      getCurrentKey,\n      setCheckedNodes,\n      setCheckedKeys,\n      setChecked,\n      getHalfCheckedNodes,\n      getHalfCheckedKeys,\n      setCurrentNode,\n      setCurrentKey,\n      t,\n      getNode,\n      remove,\n      append,\n      insertBefore,\n      insertAfter,\n      handleNodeExpand,\n      updateKeyChildren,\n    }\n  },\n})\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}