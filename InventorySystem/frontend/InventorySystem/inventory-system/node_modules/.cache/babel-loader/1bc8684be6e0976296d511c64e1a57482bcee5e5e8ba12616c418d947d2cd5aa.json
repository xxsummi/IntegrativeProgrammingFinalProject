{"ast":null,"code":"import { reactive, watch } from 'vue';\nimport Color from '../utils/color.mjs';\nimport { UPDATE_MODEL_EVENT } from '../../../../constants/event.mjs';\nconst useCommonColor = (props, emit) => {\n  const color = reactive(new Color({\n    enableAlpha: props.showAlpha,\n    format: props.colorFormat || \"\",\n    value: props.modelValue\n  }));\n  watch(() => [props.colorFormat, props.showAlpha], () => {\n    color.enableAlpha = props.showAlpha;\n    color.format = props.colorFormat || color.format;\n    color.doOnChange();\n    emit(UPDATE_MODEL_EVENT, color.value);\n  });\n  return {\n    color\n  };\n};\nexport { useCommonColor };","map":{"version":3,"names":["useCommonColor","props","emit","color","reactive","Color","enableAlpha","showAlpha","format","colorFormat","value","modelValue","watch","doOnChange","UPDATE_MODEL_EVENT"],"sources":["../../../../../../../packages/components/color-picker-panel/src/composables/use-common-color.ts"],"sourcesContent":["import { reactive, watch } from 'vue'\nimport Color from '../utils/color'\nimport { UPDATE_MODEL_EVENT } from '@element-plus/constants'\n\ntype CommonColorProps = {\n  modelValue?: string | null\n  showAlpha: boolean\n  colorFormat?: string\n}\ntype CommonColorEmits = (event: 'update:modelValue', ...args: any[]) => void\n\nexport const useCommonColor = <\n  P extends CommonColorProps,\n  E extends CommonColorEmits\n>(\n  props: P,\n  emit: E\n) => {\n  const color = reactive(\n    new Color({\n      enableAlpha: props.showAlpha,\n      format: props.colorFormat || '',\n      value: props.modelValue,\n    })\n  ) as Color\n\n  watch(\n    () => [props.colorFormat, props.showAlpha],\n    () => {\n      color.enableAlpha = props.showAlpha\n      color.format = props.colorFormat || color.format\n      color.doOnChange()\n      emit(UPDATE_MODEL_EVENT, color.value)\n    }\n  )\n\n  return {\n    color,\n  }\n}\n"],"mappings":";;;AAGY,MAACA,cAAc,GAAGA,CAACC,KAAK,EAAEC,IAAI,KAAK;EAC7C,MAAMC,KAAK,GAAGC,QAAQ,CAAC,IAAIC,KAAK,CAAC;IAC/BC,WAAW,EAAEL,KAAK,CAACM,SAAS;IAC5BC,MAAM,EAAEP,KAAK,CAACQ,WAAW,IAAI,EAAE;IAC/BC,KAAK,EAAET,KAAK,CAACU;EACjB,CAAG,CAAC,CAAC;EACHC,KAAK,CAAC,MAAM,CAACX,KAAK,CAACQ,WAAW,EAAER,KAAK,CAACM,SAAS,CAAC,EAAE,MAAM;IACtDJ,KAAK,CAACG,WAAW,GAAGL,KAAK,CAACM,SAAS;IACnCJ,KAAK,CAACK,MAAM,GAAGP,KAAK,CAACQ,WAAW,IAAIN,KAAK,CAACK,MAAM;IAChDL,KAAK,CAACU,UAAU,EAAE;IAClBX,IAAI,CAACY,kBAAkB,EAAEX,KAAK,CAACO,KAAK,CAAC;EACzC,CAAG,CAAC;EACF,OAAO;IACLP;EACJ,CAAG;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}